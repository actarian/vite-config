/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var H=function(n,e){return H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},H(n,e)};function S(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");H(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function qn(n,e,t,r){function i(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function a(l){try{f(r.next(l))}catch(d){u(d)}}function c(l){try{f(r.throw(l))}catch(d){u(d)}}function f(l){l.done?o(l.value):i(l.value).then(a,c)}f((r=r.apply(n,e||[])).next())})}function an(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,u;return u={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(f){return function(l){return c([f,l])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){t.label=f[1];break}if(f[0]===6&&t.label<o[1]){t.label=o[1],o=f;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(f);break}o[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(l){f=[6,l],i=0}finally{r=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function C(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function I(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],u;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){u={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(u)throw u.error}}return o}function P(n,e){for(var t=0,r=e.length,i=n.length;t<r;t++,i++)n[i]=e[t];return n}function O(n){return this instanceof O?(this.v=n,this):new O(n)}function Hn(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i={},u("next"),u("throw"),u("return"),i[Symbol.asyncIterator]=function(){return this},i;function u(s){r[s]&&(i[s]=function(p){return new Promise(function(m,v){o.push([s,p,m,v])>1||a(s,p)})})}function a(s,p){try{c(r[s](p))}catch(m){d(o[0][3],m)}}function c(s){s.value instanceof O?Promise.resolve(s.value.v).then(f,l):d(o[0][2],s)}function f(s){a("next",s)}function l(s){a("throw",s)}function d(s,p){s(p),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Gn(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof C=="function"?C(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(u){return new Promise(function(a,c){u=n[o](u),i(a,c,u.done,u.value)})}}function i(o,u,a,c){Promise.resolve(c).then(function(f){o({value:f,done:a})},u)}}function h(n){return typeof n=="function"}function G(n){var e=function(r){Error.call(r),r.stack=new Error().stack},t=n(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var z=G(function(n){return function(t){n(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function D(n,e){if(n){var t=n.indexOf(e);0<=t&&n.splice(t,1)}}var R=function(){function n(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._teardowns=null}return n.prototype.unsubscribe=function(){var e,t,r,i,o;if(!this.closed){this.closed=!0;var u=this._parentage;if(u)if(this._parentage=null,Array.isArray(u))try{for(var a=C(u),c=a.next();!c.done;c=a.next()){var f=c.value;f.remove(this)}}catch(v){e={error:v}}finally{try{c&&!c.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else u.remove(this);var l=this.initialTeardown;if(h(l))try{l()}catch(v){o=v instanceof z?v.errors:[v]}var d=this._teardowns;if(d){this._teardowns=null;try{for(var s=C(d),p=s.next();!p.done;p=s.next()){var m=p.value;try{ln(m)}catch(v){o=o!=null?o:[],v instanceof z?o=P(P([],I(o)),I(v.errors)):o.push(v)}}}catch(v){r={error:v}}finally{try{p&&!p.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}if(o)throw new z(o)}},n.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)ln(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._teardowns=(t=this._teardowns)!==null&&t!==void 0?t:[]).push(e)}},n.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},n.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},n.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&D(t,e)},n.prototype.remove=function(e){var t=this._teardowns;t&&D(t,e),e instanceof n&&e._removeParent(this)},n.EMPTY=function(){var e=new n;return e.closed=!0,e}(),n}(),fn=R.EMPTY;function cn(n){return n instanceof R||n&&"closed"in n&&h(n.remove)&&h(n.add)&&h(n.unsubscribe)}function ln(n){h(n)?n():n.unsubscribe()}var K={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Z={setTimeout:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=Z.delegate;return((t==null?void 0:t.setTimeout)||setTimeout).apply(void 0,P([],I(n)))},clearTimeout:function(n){var e=Z.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(n)},delegate:void 0};function sn(n){Z.setTimeout(function(){throw n})}function L(){}var F=null;function W(n){if(K.useDeprecatedSynchronousErrorHandling){var e=!F;if(e&&(F={errorThrown:!1,error:null}),n(),e){var t=F,r=t.errorThrown,i=t.error;if(F=null,r)throw i}}else n()}var $=function(n){S(e,n);function e(t){var r=n.call(this)||this;return r.isStopped=!1,t?(r.destination=t,cn(t)&&t.add(r)):r.destination=zn,r}return e.create=function(t,r,i){return new J(t,r,i)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(R),J=function(n){S(e,n);function e(t,r,i){var o=n.call(this)||this,u;if(h(t))u=t;else if(t){u=t.next,r=t.error,i=t.complete;var a;o&&K.useDeprecatedNextContext?(a=Object.create(t),a.unsubscribe=function(){return o.unsubscribe()}):a=t,u=u==null?void 0:u.bind(a),r=r==null?void 0:r.bind(a),i=i==null?void 0:i.bind(a)}return o.destination={next:u?Q(u):L,error:Q(r!=null?r:vn),complete:i?Q(i):L},o}return e}($);function Q(n,e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{n.apply(void 0,P([],I(t)))}catch(i){sn(i)}}}function vn(n){throw n}var zn={closed:!0,next:L,error:vn,complete:L},X=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function _(n){return n}function Kn(n){return n.length===0?_:n.length===1?n[0]:function(t){return n.reduce(function(r,i){return i(r)},t)}}var w=function(){function n(e){e&&(this._subscribe=e)}return n.prototype.lift=function(e){var t=new n;return t.source=this,t.operator=e,t},n.prototype.subscribe=function(e,t,r){var i=this,o=$n(e)?e:new J(e,t,r);return W(function(){var u=i,a=u.operator,c=u.source;o.add(a?a.call(o,c):c?i._subscribe(o):i._trySubscribe(o))}),o},n.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},n.prototype.forEach=function(e,t){var r=this;return t=hn(t),new t(function(i,o){var u;u=r.subscribe(function(a){try{e(a)}catch(c){o(c),u==null||u.unsubscribe()}},o,i)})},n.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},n.prototype[X]=function(){return this},n.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Kn(e)(this)},n.prototype.toPromise=function(e){var t=this;return e=hn(e),new e(function(r,i){var o;t.subscribe(function(u){return o=u},function(u){return i(u)},function(){return r(o)})})},n.create=function(e){return new n(e)},n}();function hn(n){var e;return(e=n!=null?n:K.Promise)!==null&&e!==void 0?e:Promise}function Zn(n){return n&&h(n.next)&&h(n.error)&&h(n.complete)}function $n(n){return n&&n instanceof $||Zn(n)&&cn(n)}function Jn(n){return h(n==null?void 0:n.lift)}function b(n){return function(e){if(Jn(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}var y=function(n){S(e,n);function e(t,r,i,o,u){var a=n.call(this,t)||this;return a.onFinalize=u,a._next=r?function(c){try{r(c)}catch(f){t.error(f)}}:n.prototype._next,a._error=o?function(c){try{o(c)}catch(f){t.error(f)}finally{this.unsubscribe()}}:n.prototype._error,a._complete=i?function(){try{i()}catch(c){t.error(c)}finally{this.unsubscribe()}}:n.prototype._complete,a}return e.prototype.unsubscribe=function(){var t,r=this.closed;n.prototype.unsubscribe.call(this),!r&&((t=this.onFinalize)===null||t===void 0||t.call(this))},e}($),Qn=G(function(n){return function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Y=function(n){S(e,n);function e(){var t=n.call(this)||this;return t.closed=!1,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return e.prototype.lift=function(t){var r=new dn(this,this);return r.operator=t,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new Qn},e.prototype.next=function(t){var r=this;W(function(){var i,o;if(r._throwIfClosed(),!r.isStopped){var u=r.observers.slice();try{for(var a=C(u),c=a.next();!c.done;c=a.next()){var f=c.value;f.next(t)}}catch(l){i={error:l}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}}})},e.prototype.error=function(t){var r=this;W(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=t;for(var i=r.observers;i.length;)i.shift().error(t)}})},e.prototype.complete=function(){var t=this;W(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var r=t.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(t){return this._throwIfClosed(),n.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var r=this,i=r.hasError,o=r.isStopped,u=r.observers;return i||o?fn:(u.push(t),new R(function(){return D(u,t)}))},e.prototype._checkFinalizedStatuses=function(t){var r=this,i=r.hasError,o=r.thrownError,u=r.isStopped;i?t.error(o):u&&t.complete()},e.prototype.asObservable=function(){var t=new w;return t.source=this,t},e.create=function(t,r){return new dn(t,r)},e}(w),dn=function(n){S(e,n);function e(t,r){var i=n.call(this)||this;return i.destination=t,i.source=r,i}return e.prototype.next=function(t){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,t)},e.prototype.error=function(t){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,t)},e.prototype.complete=function(){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||r===void 0||r.call(t)},e.prototype._subscribe=function(t){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(t))!==null&&i!==void 0?i:fn},e}(Y),Ht=function(n){S(e,n);function e(t){var r=n.call(this)||this;return r._value=t,r}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(t){var r=n.prototype._subscribe.call(this,t);return!r.closed&&t.next(this._value),r},e.prototype.getValue=function(){var t=this,r=t.hasError,i=t.thrownError,o=t._value;if(r)throw i;return this._throwIfClosed(),o},e.prototype.next=function(t){n.prototype.next.call(this,this._value=t)},e}(Y),B={now:function(){return(B.delegate||Date).now()},delegate:void 0},Xn=function(n){S(e,n);function e(t,r,i){t===void 0&&(t=1/0),r===void 0&&(r=1/0),i===void 0&&(i=B);var o=n.call(this)||this;return o._bufferSize=t,o._windowTime=r,o._timestampProvider=i,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=r===1/0,o._bufferSize=Math.max(1,t),o._windowTime=Math.max(1,r),o}return e.prototype.next=function(t){var r=this,i=r.isStopped,o=r._buffer,u=r._infiniteTimeWindow,a=r._timestampProvider,c=r._windowTime;i||(o.push(t),!u&&o.push(a.now()+c)),this._trimBuffer(),n.prototype.next.call(this,t)},e.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(t),i=this,o=i._infiniteTimeWindow,u=i._buffer,a=u.slice(),c=0;c<a.length&&!t.closed;c+=o?1:2)t.next(a[c]);return this._checkFinalizedStatuses(t),r},e.prototype._trimBuffer=function(){var t=this,r=t._bufferSize,i=t._timestampProvider,o=t._buffer,u=t._infiniteTimeWindow,a=(u?1:2)*r;if(r<1/0&&a<o.length&&o.splice(0,o.length-a),!u){for(var c=i.now(),f=0,l=1;l<o.length&&o[l]<=c;l+=2)f=l;f&&o.splice(0,f+1)}},e}(Y),Bn=function(n){S(e,n);function e(t,r){return n.call(this)||this}return e.prototype.schedule=function(t,r){return this},e}(R),q={setInterval:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=q.delegate;return((t==null?void 0:t.setInterval)||setInterval).apply(void 0,P([],I(n)))},clearInterval:function(n){var e=q.delegate;return((e==null?void 0:e.clearInterval)||clearInterval)(n)},delegate:void 0},Nn=function(n){S(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.scheduler=t,i.work=r,i.pending=!1,i}return e.prototype.schedule=function(t,r){if(r===void 0&&(r=0),this.closed)return this;this.state=t;var i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,r)),this.pending=!0,this.delay=r,this.id=this.id||this.requestAsyncId(o,this.id,r),this},e.prototype.requestAsyncId=function(t,r,i){return i===void 0&&(i=0),q.setInterval(t.flush.bind(t,this),i)},e.prototype.recycleAsyncId=function(t,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;q.clearInterval(r)},e.prototype.execute=function(t,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,r){var i=!1,o;try{this.work(t)}catch(u){i=!0,o=u||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},e.prototype.unsubscribe=function(){if(!this.closed){var t=this,r=t.id,i=t.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,D(o,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,n.prototype.unsubscribe.call(this)}},e}(Bn),pn=function(){function n(e,t){t===void 0&&(t=n.now),this.schedulerActionCtor=e,this.now=t}return n.prototype.schedule=function(e,t,r){return t===void 0&&(t=0),new this.schedulerActionCtor(this,e).schedule(r,t)},n.now=B.now,n}(),nt=function(n){S(e,n);function e(t,r){r===void 0&&(r=pn.now);var i=n.call(this,t,r)||this;return i.actions=[],i._active=!1,i._scheduled=void 0,i}return e.prototype.flush=function(t){var r=this.actions;if(this._active){r.push(t);return}var i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=r.shift());if(this._active=!1,i){for(;t=r.shift();)t.unsubscribe();throw i}},e}(pn),N=new nt(Nn),yn=N,mn=new w(function(n){return n.complete()});function bn(n){return n&&h(n.schedule)}function nn(n){return n[n.length-1]}function tt(n){return h(nn(n))?n.pop():void 0}function U(n){return bn(nn(n))?n.pop():void 0}function et(n,e){return typeof nn(n)=="number"?n.pop():e}var tn=function(n){return n&&typeof n.length=="number"&&typeof n!="function"};function wn(n){return h(n==null?void 0:n.then)}function gn(n){return h(n[X])}function Sn(n){return Symbol.asyncIterator&&h(n==null?void 0:n[Symbol.asyncIterator])}function En(n){return new TypeError("You provided "+(n!==null&&typeof n=="object"?"an invalid object":"'"+n+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function rt(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var xn=rt();function In(n){return h(n==null?void 0:n[xn])}function _n(n){return Hn(this,arguments,function(){var t,r,i,o;return an(this,function(u){switch(u.label){case 0:t=n.getReader(),u.label=1;case 1:u.trys.push([1,,9,10]),u.label=2;case 2:return[4,O(t.read())];case 3:return r=u.sent(),i=r.value,o=r.done,o?[4,O(void 0)]:[3,5];case 4:return[2,u.sent()];case 5:return[4,O(i)];case 6:return[4,u.sent()];case 7:return u.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function An(n){return h(n==null?void 0:n.getReader)}function g(n){if(n instanceof w)return n;if(n!=null){if(gn(n))return it(n);if(tn(n))return ot(n);if(wn(n))return ut(n);if(Sn(n))return Pn(n);if(In(n))return at(n);if(An(n))return ft(n)}throw En(n)}function it(n){return new w(function(e){var t=n[X]();if(h(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ot(n){return new w(function(e){for(var t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function ut(n){return new w(function(e){n.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,sn)})}function at(n){return new w(function(e){var t,r;try{for(var i=C(n),o=i.next();!o.done;o=i.next()){var u=o.value;if(e.next(u),e.closed)return}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}e.complete()})}function Pn(n){return new w(function(e){ct(n,e).catch(function(t){return e.error(t)})})}function ft(n){return Pn(_n(n))}function ct(n,e){var t,r,i,o;return qn(this,void 0,void 0,function(){var u,a;return an(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),t=Gn(n),c.label=1;case 1:return[4,t.next()];case 2:if(r=c.sent(),!!r.done)return[3,4];if(u=r.value,e.next(u),e.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(o=t.return)?[4,o.call(t)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function x(n,e,t,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Tn(n,e){return e===void 0&&(e=0),b(function(t,r){t.subscribe(new y(r,function(i){return x(r,n,function(){return r.next(i)},e)},function(){return x(r,n,function(){return r.complete()},e)},function(i){return x(r,n,function(){return r.error(i)},e)}))})}function Cn(n,e){return e===void 0&&(e=0),b(function(t,r){r.add(n.schedule(function(){return t.subscribe(r)},e))})}function lt(n,e){return g(n).pipe(Cn(e),Tn(e))}function st(n,e){return g(n).pipe(Cn(e),Tn(e))}function vt(n,e){return new w(function(t){var r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function ht(n,e){return new w(function(t){var r;return x(t,e,function(){r=n[xn](),x(t,e,function(){var i,o,u;try{i=r.next(),o=i.value,u=i.done}catch(a){t.error(a);return}u?t.complete():t.next(o)},0,!0)}),function(){return h(r==null?void 0:r.return)&&r.return()}})}function On(n,e){if(!n)throw new Error("Iterable cannot be null");return new w(function(t){x(t,e,function(){var r=n[Symbol.asyncIterator]();x(t,e,function(){r.next().then(function(i){i.done?t.complete():t.next(i.value)})},0,!0)})})}function dt(n,e){return On(_n(n),e)}function pt(n,e){if(n!=null){if(gn(n))return lt(n,e);if(tn(n))return vt(n,e);if(wn(n))return st(n,e);if(Sn(n))return On(n,e);if(In(n))return ht(n,e);if(An(n))return dt(n,e)}throw En(n)}function k(n,e){return e?pt(n,e):g(n)}function Gt(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=U(n);return k(n,t)}function zt(n){return!!n&&(n instanceof w||h(n.lift)&&h(n.subscribe))}var kn=G(function(n){return function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}});function yt(n){return n instanceof Date&&!isNaN(n)}function jn(n,e){return b(function(t,r){var i=0;t.subscribe(new y(r,function(o){r.next(n.call(e,o,i++))}))})}var mt=Array.isArray;function bt(n,e){return mt(e)?n.apply(void 0,P([],I(e))):n(e)}function Rn(n){return jn(function(e){return bt(n,e)})}var wt=Array.isArray,gt=Object.getPrototypeOf,St=Object.prototype,Et=Object.keys;function xt(n){if(n.length===1){var e=n[0];if(wt(e))return{args:e,keys:null};if(It(e)){var t=Et(e);return{args:t.map(function(r){return e[r]}),keys:t}}}return{args:n,keys:null}}function It(n){return n&&typeof n=="object"&&gt(n)===St}function _t(n,e){return n.reduce(function(t,r,i){return t[r]=e[i],t},{})}function Kt(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=U(n),r=tt(n),i=xt(n),o=i.args,u=i.keys;if(o.length===0)return k([],t);var a=new w(At(o,t,u?function(c){return _t(u,c)}:_));return r?a.pipe(Rn(r)):a}function At(n,e,t){return t===void 0&&(t=_),function(r){Ln(e,function(){for(var i=n.length,o=new Array(i),u=i,a=i,c=function(l){Ln(e,function(){var d=k(n[l],e),s=!1;d.subscribe(new y(r,function(p){o[l]=p,s||(s=!0,a--),a||r.next(t(o.slice()))},function(){--u||r.complete()}))},r)},f=0;f<i;f++)c(f)},r)}}function Ln(n,e,t){n?x(t,n,e):e()}function Pt(n,e,t,r,i,o,u,a){var c=[],f=0,l=0,d=!1,s=function(){d&&!c.length&&!f&&e.complete()},p=function(v){return f<r?m(v):c.push(v)},m=function(v){o&&e.next(v),f++;var A=!1;g(t(v,l++)).subscribe(new y(e,function(E){i==null||i(E),o?p(E):e.next(E)},function(){A=!0},void 0,function(){if(A)try{f--;for(var E=function(){var T=c.shift();u?x(e,u,function(){return m(T)}):m(T)};c.length&&f<r;)E();s()}catch(T){e.error(T)}}))};return n.subscribe(new y(e,p,function(){d=!0,s()})),function(){a==null||a()}}function en(n,e,t){return t===void 0&&(t=1/0),h(e)?en(function(r,i){return jn(function(o,u){return e(r,o,i,u)})(g(n(r,i)))},t):(typeof e=="number"&&(t=e),b(function(r,i){return Pt(r,i,n,t)}))}function Un(n){return n===void 0&&(n=1/0),en(_,n)}function Tt(){return Un(1)}function Mn(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return Tt()(k(n,U(n)))}var Ct=["addListener","removeListener"],Ot=["addEventListener","removeEventListener"],kt=["on","off"];function Vn(n,e,t,r){if(h(t)&&(r=t,t=void 0),r)return Vn(n,e,t).pipe(Rn(r));var i=I(Lt(n)?Ot.map(function(a){return function(c){return n[a](e,c,t)}}):jt(n)?Ct.map(Dn(n,e)):Rt(n)?kt.map(Dn(n,e)):[],2),o=i[0],u=i[1];if(!o&&tn(n))return en(function(a){return Vn(a,e,t)})(g(n));if(!o)throw new TypeError("Invalid event target");return new w(function(a){var c=function(){for(var f=[],l=0;l<arguments.length;l++)f[l]=arguments[l];return a.next(1<f.length?f:f[0])};return o(c),function(){return u(c)}})}function Dn(n,e){return function(t){return function(r){return n[t](e,r)}}}function jt(n){return h(n.addListener)&&h(n.removeListener)}function Rt(n){return h(n.on)&&h(n.off)}function Lt(n){return h(n.addEventListener)&&h(n.removeEventListener)}function rn(n,e,t){n===void 0&&(n=0),t===void 0&&(t=yn);var r=-1;return e!=null&&(bn(e)?t=e:r=e),new w(function(i){var o=yt(n)?+n-t.now():n;o<0&&(o=0);var u=0;return t.schedule(function(){i.closed||(i.next(u++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function Zt(n,e){return n===void 0&&(n=0),e===void 0&&(e=N),n<0&&(n=0),rn(n,n,e)}function $t(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=U(n),r=et(n,1/0),i=n;return i.length?i.length===1?g(i[0]):Un(r)(k(i,t)):mn}function Fn(n,e){return b(function(t,r){var i=0;t.subscribe(new y(r,function(o){return n.call(e,o,i++)&&r.next(o)}))})}function Ut(n){return b(function(e,t){var r=!1,i=null,o=null,u=!1,a=function(){if(o==null||o.unsubscribe(),o=null,r){r=!1;var f=i;i=null,t.next(f)}u&&t.complete()},c=function(){o=null,u&&t.complete()};e.subscribe(new y(t,function(f){r=!0,i=f,o||g(n(f)).subscribe(o=new y(t,a,c))},function(){u=!0,(!r||!o||o.closed)&&t.complete()}))})}function Jt(n,e){return e===void 0&&(e=yn),Ut(function(){return rn(n,e)})}function Mt(n){return b(function(e,t){var r=!1;e.subscribe(new y(t,function(i){r=!0,t.next(i)},function(){r||t.next(n),t.complete()}))})}function Wn(n){return n<=0?function(){return mn}:b(function(e,t){var r=0;e.subscribe(new y(t,function(i){++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Qt(n,e){return e===void 0&&(e=_),n=n!=null?n:Vt,b(function(t,r){var i,o=!0;t.subscribe(new y(r,function(u){var a=e(u);(o||!n(i,a))&&(o=!1,i=a,r.next(u))}))})}function Vt(n,e){return n===e}function Dt(n){return n===void 0&&(n=Ft),b(function(e,t){var r=!1;e.subscribe(new y(t,function(i){r=!0,t.next(i)},function(){return r?t.complete():t.error(n())}))})}function Ft(){return new kn}function Xt(n){return b(function(e,t){try{e.subscribe(t)}finally{t.add(n)}})}function Bt(n,e){var t=arguments.length>=2;return function(r){return r.pipe(n?Fn(function(i,o){return n(i,o,r)}):_,Wn(1),t?Mt(e):Dt(function(){return new kn}))}}function Wt(n){n===void 0&&(n={});var e=n.connector,t=e===void 0?function(){return new Y}:e,r=n.resetOnError,i=r===void 0?!0:r,o=n.resetOnComplete,u=o===void 0?!0:o,a=n.resetOnRefCountZero,c=a===void 0?!0:a;return function(f){var l=null,d=null,s=null,p=0,m=!1,v=!1,A=function(){d==null||d.unsubscribe(),d=null},E=function(){A(),l=s=null,m=v=!1},T=function(){var j=l;E(),j==null||j.unsubscribe()};return b(function(j,un){p++,!v&&!m&&A();var M=s=s!=null?s:t();un.add(function(){p--,p===0&&!v&&!m&&(d=on(T,c))}),M.subscribe(un),l||(l=new J({next:function(V){return M.next(V)},error:function(V){v=!0,A(),d=on(E,i,V),M.error(V)},complete:function(){m=!0,A(),d=on(E,u),M.complete()}}),k(j).subscribe(l))})(f)}}function on(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return e===!0?(n(),null):e===!1?null:e.apply(void 0,P([],I(t))).pipe(Wn(1)).subscribe(function(){return n()})}function Nt(n,e,t){var r,i,o,u=!1;return n&&typeof n=="object"?(o=(r=n.bufferSize)!==null&&r!==void 0?r:1/0,e=(i=n.windowTime)!==null&&i!==void 0?i:1/0,u=!!n.refCount,t=n.scheduler):o=n!=null?n:1/0,Wt({connector:function(){return new Xn(o,e,t)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}function ne(n){return Fn(function(e,t){return n<=t})}function te(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=U(n);return b(function(r,i){(t?Mn(n,r,t):Mn(n,r)).subscribe(i)})}function Yt(n,e){return b(function(t,r){var i=null,o=0,u=!1,a=function(){return u&&!i&&r.complete()};t.subscribe(new y(r,function(c){i==null||i.unsubscribe();var f=0,l=o++;g(n(c,l)).subscribe(i=new y(r,function(d){return r.next(e?e(c,d,l,f++):d)},function(){i=null,a()}))},function(){u=!0,a()}))})}function ee(){return Yt(_)}function re(n){return b(function(e,t){g(n).subscribe(new y(t,function(){return t.complete()},L)),!t.closed&&e.subscribe(t)})}function ie(n,e,t){var r=h(n)||e||t?{next:n,error:e,complete:t}:n;return r?b(function(i,o){var u;(u=r.subscribe)===null||u===void 0||u.call(r);var a=!0;i.subscribe(new y(o,function(c){var f;(f=r.next)===null||f===void 0||f.call(r,c),o.next(c)},function(){var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},function(c){var f;a=!1,(f=r.error)===null||f===void 0||f.call(r,c),o.error(c)},function(){var c,f;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(f=r.finalize)===null||f===void 0||f.call(r)}))}):_}var Yn={leading:!0,trailing:!1};function qt(n,e){var t=e===void 0?Yn:e,r=t.leading,i=t.trailing;return b(function(o,u){var a=!1,c=null,f=null,l=!1,d=function(){f==null||f.unsubscribe(),f=null,i&&(m(),l&&u.complete())},s=function(){f=null,l&&u.complete()},p=function(v){return f=g(n(v)).subscribe(new y(u,d,s))},m=function(){if(a){a=!1;var v=c;c=null,u.next(v),!l&&p(v)}};o.subscribe(new y(u,function(v){a=!0,c=v,!(f&&!f.closed)&&(r?m():p(v))},function(){l=!0,!(i&&a&&f&&!f.closed)&&u.complete()}))})}function oe(n,e,t){e===void 0&&(e=N),t===void 0&&(t=Yn);var r=rn(n,e);return qt(function(){return r},t)}export{Ht as B,mn as E,Xn as R,Y as S,Fn as a,re as b,Bt as c,$t as d,Vn as e,k as f,te as g,Nt as h,oe as i,Zt as j,ee as k,Qt as l,jn as m,ne as n,Gt as o,Jt as p,Kt as q,zt as r,Yt as s,ie as t,Xt as u};
